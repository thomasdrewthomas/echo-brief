(()=>{var e={};e.id=33,e.ids=[33],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(1507),r(1506),r(5866);var a=r(3191),o=r(8716),n=r(7922),s=r.n(n),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["prompt-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1507)),"C:\\Users\\thomasdrew\\source\\repos\\echo-brief4\\sonic-brief\\frontend_app\\app\\prompt-management\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\Users\\thomasdrew\\source\\repos\\echo-brief4\\sonic-brief\\frontend_app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\thomasdrew\\source\\repos\\echo-brief4\\sonic-brief\\frontend_app\\app\\prompt-management\\page.tsx"],u="/prompt-management/page",g={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/prompt-management/page",pathname:"/prompt-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3655:(e,t,r)=>{Promise.resolve().then(r.bind(r,8448))},8448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ez});var a=r(326),o=r(7577),n=r(772),s=r(2881);let i=(0,s.Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var l=r(6027),c=r(6824);let d=(0,o.createContext)(void 0);function u({children:e}){let[t,r]=(0,o.useState)([]),[n,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(null),[u,g]=(0,o.useState)(null),[p,h]=(0,o.useState)(!1),[m,f]=(0,o.useState)(null),y=(0,o.useCallback)(async()=>{h(!0),f(null);try{let e=await (0,c.pE)();if(r(e),i){let e=await (0,c.hv)(i.category_id);s(e)}else{let e=await (0,c.hv)();s(e)}}catch(e){f(e instanceof Error?e.message:"An error occurred while fetching data"),console.error("Error fetching data:",e)}finally{h(!1)}},[i]),v=(0,o.useCallback)(async e=>{h(!0),f(null);try{await (0,c.k4)(e),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while creating category"),console.error("Error creating category:",e),e}finally{h(!1)}},[y]),x=(0,o.useCallback)(async(e,t,r)=>{h(!0),f(null);try{await (0,c.Wc)(e,t,r),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while creating subcategory"),console.error("Error creating subcategory:",e),e}finally{h(!1)}},[y]),b=(0,o.useCallback)(async(e,t)=>{h(!0),f(null);try{await (0,c.yr)(e,t),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while updating category"),console.error("Error updating category:",e),e}finally{h(!1)}},[y]),w=(0,o.useCallback)(async(e,t,r)=>{h(!0),f(null);try{await (0,c.A4)(e,t,r),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while updating subcategory"),console.error("Error updating subcategory:",e),e}finally{h(!1)}},[y]),j=(0,o.useCallback)(async e=>{h(!0),f(null);try{await (0,c.uu)(e),i?.category_id===e&&l(null),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while deleting category"),console.error("Error deleting category:",e),e}finally{h(!1)}},[y,i]),C=(0,o.useCallback)(async e=>{h(!0),f(null);try{await (0,c.nv)(e),u?.id===e&&g(null),await y()}catch(e){throw f(e instanceof Error?e.message:"An error occurred while deleting subcategory"),console.error("Error deleting subcategory:",e),e}finally{h(!1)}},[y,u]);return a.jsx(d.Provider,{value:{categories:t,subcategories:n,selectedCategory:i,selectedSubcategory:u,loading:p,error:m,refreshData:y,setSelectedCategory:l,setSelectedSubcategory:g,addCategory:v,addSubcategory:x,editCategory:b,editSubcategory:w,removeCategory:j,removeSubcategory:C},children:e})}function g(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("usePromptManagement must be used within a PromptManagementProvider");return e}var p=r(613),h=r(4432),m=r(1048),f=r(4008);function y(){let{addCategory:e,loading:t}=g(),[r,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),{toast:u}=(0,f.p)(),y=async()=>{if(!c.trim()){u({title:"Error",description:"Category name cannot be empty",variant:"destructive"});return}try{await e(c),u({title:"Success",description:"Category created successfully"}),d(""),s(!1)}catch(e){u({title:"Error",description:e instanceof Error?e.message:"Failed to create category",variant:"destructive"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Prompt Management"}),(0,a.jsxs)(l.aG,{children:[a.jsx(l.gN,{children:a.jsx(l.At,{href:"/",children:"Home"})}),a.jsx(l.gN,{children:a.jsx(l.AG,{children:"Prompt Management"})})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage categories, subcategories, and prompts for your AI system."})]}),(0,a.jsxs)(n.z,{onClick:()=>s(!0),children:[a.jsx(i,{className:"mr-2 h-4 w-4"}),"Add Category"]})]}),a.jsx(p.Vq,{open:r,onOpenChange:s,children:(0,a.jsxs)(p.cZ,{children:[a.jsx(p.fK,{children:a.jsx(p.$N,{children:"Create New Category"})}),a.jsx("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx(m._,{htmlFor:"name",children:"Category Name"}),a.jsx(h.I,{id:"name",value:c,onChange:e=>d(e.target.value),placeholder:"Enter category name"})]},"category-name-field")}),(0,a.jsxs)(p.cN,{children:[a.jsx(n.z,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),a.jsx(n.z,{onClick:y,disabled:t,children:t?"Creating...":"Create Category"})]})]})})]})}var v=r(2643),x=r(5226),b=r(9815),w=r(3095),j=r(8051),C=r(5049),N=r(7124),E=r(5819),S=r(7125),k=r(2561),P="ScrollArea",[T,_]=(0,w.b)(P),[A,D]=T(P),I=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...l}=e,[c,d]=o.useState(null),[u,g]=o.useState(null),[p,h]=o.useState(null),[m,f]=o.useState(null),[y,v]=o.useState(null),[b,w]=o.useState(0),[C,E]=o.useState(0),[S,k]=o.useState(!1),[P,T]=o.useState(!1),_=(0,j.e)(t,e=>d(e)),D=(0,N.gm)(s);return(0,a.jsx)(A,{scope:r,type:n,dir:D,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:g,content:p,onContentChange:h,scrollbarX:m,onScrollbarXChange:f,scrollbarXEnabled:S,onScrollbarXEnabledChange:k,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:P,onScrollbarYEnabledChange:T,onCornerWidthChange:w,onCornerHeightChange:E,children:(0,a.jsx)(x.WV.div,{dir:D,...l,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});I.displayName=P;var z="ScrollAreaViewport",R=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:n,nonce:s,...i}=e,l=D(z,r),c=o.useRef(null),d=(0,j.e)(t,c,l.onViewportChange);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,a.jsx)(x.WV.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,a.jsx)("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});R.displayName=z;var $="ScrollAreaScrollbar",O=o.forwardRef((e,t)=>{let{forceMount:r,...n}=e,s=D($,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,c="horizontal"===e.orientation;return o.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),"hover"===s.type?(0,a.jsx)(M,{...n,ref:t,forceMount:r}):"scroll"===s.type?(0,a.jsx)(L,{...n,ref:t,forceMount:r}):"auto"===s.type?(0,a.jsx)(W,{...n,ref:t,forceMount:r}):"always"===s.type?(0,a.jsx)(U,{...n,ref:t}):null});O.displayName=$;var M=o.forwardRef((e,t)=>{let{forceMount:r,...n}=e,s=D($,e.__scopeScrollArea),[i,l]=o.useState(!1);return o.useEffect(()=>{let e=s.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),l(!0)},a=()=>{t=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",a)}}},[s.scrollArea,s.scrollHideDelay]),(0,a.jsx)(b.z,{present:r||i,children:(0,a.jsx)(W,{"data-state":i?"visible":"hidden",...n,ref:t})})}),L=o.forwardRef((e,t)=>{var r,n;let{forceMount:s,...i}=e,l=D($,e.__scopeScrollArea),c="horizontal"===e.orientation,d=en(()=>g("SCROLL_END"),100),[u,g]=(r="hidden",n={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},o.useReducer((e,t)=>n[e][t]??e,r));return o.useEffect(()=>{if("idle"===u){let e=window.setTimeout(()=>g("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,l.scrollHideDelay,g]),o.useEffect(()=>{let e=l.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],a=()=>{let a=e[t];r!==a&&(g("SCROLL"),d()),r=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[l.viewport,c,g,d]),(0,a.jsx)(b.z,{present:s||"hidden"!==u,children:(0,a.jsx)(U,{"data-state":"hidden"===u?"hidden":"visible",...i,ref:t,onPointerEnter:(0,k.M)(e.onPointerEnter,()=>g("POINTER_ENTER")),onPointerLeave:(0,k.M)(e.onPointerLeave,()=>g("POINTER_LEAVE"))})})}),W=o.forwardRef((e,t)=>{let r=D($,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,l]=o.useState(!1),c="horizontal"===e.orientation,d=en(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?e:t)}},10);return es(r.viewport,d),es(r.content,d),(0,a.jsx)(b.z,{present:n||i,children:(0,a.jsx)(U,{"data-state":i?"visible":"hidden",...s,ref:t})})}),U=o.forwardRef((e,t)=>{let{orientation:r="vertical",...n}=e,s=D($,e.__scopeScrollArea),i=o.useRef(null),l=o.useRef(0),[c,d]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ee(c.viewport,c.content),g={...n,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function p(e,t){return function(e,t,r,a="ltr"){let o=et(r),n=t||o/2,s=r.scrollbar.paddingStart+n,i=r.scrollbar.size-r.scrollbar.paddingEnd-(o-n),l=r.content-r.viewport;return ea([s,i],"ltr"===a?[0,l]:[-1*l,0])(e)}(e,l.current,c,t)}return"horizontal"===r?(0,a.jsx)(H,{...g,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){let e=er(s.viewport.scrollLeft,c,s.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=p(e,s.dir))}}):"vertical"===r?(0,a.jsx)(V,{...g,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){let e=er(s.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=p(e))}}):null}),H=o.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...s}=e,i=D($,e.__scopeScrollArea),[l,c]=o.useState(),d=o.useRef(null),u=(0,j.e)(t,d,i.onScrollbarXChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,a.jsx)(q,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":et(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){let a=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Q(l.paddingLeft),paddingEnd:Q(l.paddingRight)}})}})}),V=o.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...s}=e,i=D($,e.__scopeScrollArea),[l,c]=o.useState(),d=o.useRef(null),u=(0,j.e)(t,d,i.onScrollbarYChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,a.jsx)(q,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":et(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){let a=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Q(l.paddingTop),paddingEnd:Q(l.paddingBottom)}})}})}),[F,Z]=T($),q=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:g,onResize:p,...h}=e,m=D($,r),[f,y]=o.useState(null),v=(0,j.e)(t,e=>y(e)),b=o.useRef(null),w=o.useRef(""),N=m.viewport,E=n.content-n.viewport,S=(0,C.W)(g),P=(0,C.W)(d),T=en(p,10);function _(e){b.current&&u({x:e.clientX-b.current.left,y:e.clientY-b.current.top})}return o.useEffect(()=>{let e=e=>{let t=e.target;f?.contains(t)&&S(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[N,f,E,S]),o.useEffect(P,[n,P]),es(f,T),es(m.content,T),(0,a.jsx)(F,{scope:r,scrollbar:f,hasThumb:s,onThumbChange:(0,C.W)(i),onThumbPointerUp:(0,C.W)(l),onThumbPositionChange:P,onThumbPointerDown:(0,C.W)(c),children:(0,a.jsx)(x.WV.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:(0,k.M)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),b.current=f.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),_(e))}),onPointerMove:(0,k.M)(e.onPointerMove,_),onPointerUp:(0,k.M)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),B="ScrollAreaThumb",G=o.forwardRef((e,t)=>{let{forceMount:r,...o}=e,n=Z(B,e.__scopeScrollArea);return(0,a.jsx)(b.z,{present:r||n.hasThumb,children:(0,a.jsx)(Y,{ref:t,...o})})}),Y=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:n,...s}=e,i=D(B,r),l=Z(B,r),{onThumbPositionChange:c}=l,d=(0,j.e)(t,e=>l.onThumbChange(e)),u=o.useRef(void 0),g=en(()=>{u.current&&(u.current(),u.current=void 0)},100);return o.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{if(g(),!u.current){let t=eo(e,c);u.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,g,c]),(0,a.jsx)(x.WV.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:(0,k.M)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;l.onThumbPointerDown({x:r,y:a})}),onPointerUp:(0,k.M)(e.onPointerUp,l.onThumbPointerUp)})});G.displayName=B;var X="ScrollAreaCorner",K=o.forwardRef((e,t)=>{let r=D(X,e.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&o?(0,a.jsx)(J,{...e,ref:t}):null});K.displayName=X;var J=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,...n}=e,s=D(X,r),[i,l]=o.useState(0),[c,d]=o.useState(0),u=!!(i&&c);return es(s.scrollbarX,()=>{let e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),d(e)}),es(s.scrollbarY,()=>{let e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),l(e)}),u?(0,a.jsx)(x.WV.div,{...n,ref:t,style:{width:i,height:c,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function Q(e){return e?parseInt(e,10):0}function ee(e,t){let r=e/t;return isNaN(r)?0:r}function et(e){let t=ee(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function er(e,t,r="ltr"){let a=et(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-o,s=t.content-t.viewport,i=(0,S.u)(e,"ltr"===r?[0,s]:[-1*s,0]);return ea([0,s],[0,n-a])(i)}function ea(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}var eo=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return function o(){let n={left:e.scrollLeft,top:e.scrollTop},s=r.left!==n.left,i=r.top!==n.top;(s||i)&&t(),r=n,a=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(a)};function en(e,t){let r=(0,C.W)(e),a=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(a.current),[]),o.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function es(e,t){let r=(0,C.W)(t);(0,E.b)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,r])}var ei=r(7863);let el=o.forwardRef(({className:e,children:t,...r},o)=>(0,a.jsxs)(I,{ref:o,className:(0,ei.cn)("relative overflow-hidden",e),...r,children:[a.jsx(R,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(ec,{}),a.jsx(K,{})]}));el.displayName=I.displayName;let ec=o.forwardRef(({className:e,orientation:t="vertical",...r},o)=>a.jsx(O,{ref:o,orientation:t,className:(0,ei.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(G,{className:"relative flex-1 rounded-full bg-border"})}));ec.displayName=O.displayName;var ed=r(8483),eu=r(7506),eg=r(8393),ep=r(9183);let eh=(0,s.Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),em=(0,s.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ef=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ey=(0,s.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ev=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ex=(0,s.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),eb=(0,r(9360).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ew=o.forwardRef(({className:e,variant:t,...r},o)=>a.jsx("div",{ref:o,role:"alert",className:(0,ei.cn)(eb({variant:t}),e),...r}));ew.displayName="Alert";let ej=o.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:(0,ei.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));ej.displayName="AlertTitle";let eC=o.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,ei.cn)("text-sm [&_p]:leading-relaxed",e),...t}));eC.displayName="AlertDescription";var eN=r(3427),eE=r(3353),eS=r.n(eE);r(2058),r(471);let ek=eS()(async()=>{},{loadableGenerated:{modules:["components\\prompt-management\\markdown-editor.tsx -> @uiw/react-md-editor"]},ssr:!1}),eP=eS()(async()=>{},{loadableGenerated:{modules:["components\\prompt-management\\markdown-editor.tsx -> @uiw/react-markdown-preview"]},ssr:!1});function eT({initialPrompts:e={},onSave:t,onCancel:r,hideActionButtons:s=!1}){let[i,l]=(0,o.useState)([]),[c,d]=(0,o.useState)("edit");(0,o.useRef)(!1),(0,o.useRef)(()=>{});let u=e=>{console.log(`Removing prompt at index ${e}`),l(t=>{let r=[...t];return r.splice(e,1),r.length>0?r:[{key:"",value:""}]})},g=(e,r)=>{console.log(`Updating prompt ${e} key to: ${r}`),l(a=>{let o=[...a];return o[e]={...o[e],key:r},t(Object.fromEntries(o.filter(e=>e.key.trim()).map(e=>[e.key.trim(),e.value.trim()]))),o})},p=(e,r)=>{console.log(`Updating prompt ${e} value, length: ${r?.length||0}`),l(a=>{let o=[...a];return o[e]={...o[e],value:r||""},t(Object.fromEntries(o.filter(e=>e.key.trim()).map(e=>[e.key.trim(),e.value.trim()]))),o})},f=()=>{let e={},r=!1;i.forEach(t=>{t.key.trim()&&(r=!0,e[t.key.trim()]=t.value.trim())}),r||console.warn("No valid prompts to save (all empty keys)"),console.log("Saving prompts:",e),t(e)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(eN.mQ,{value:c,onValueChange:d,children:[(0,a.jsxs)(eN.dr,{children:[a.jsx(eN.SP,{value:"edit",children:"Edit"}),a.jsx(eN.SP,{value:"preview",children:"Preview"})]}),(0,a.jsxs)(eN.nU,{value:"edit",className:"space-y-4",children:[i.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium",children:["Prompt ",t+1]}),a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>u(t),disabled:1===i.length,children:"Remove"})]},`prompt-header-${t}`),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:`prompt-key-${t}`,children:"Prompt Key"}),a.jsx(h.I,{id:`prompt-key-${t}`,value:e.key,onChange:e=>{console.log("Key input changed:",e.target.value),g(t,e.target.value)},placeholder:"Enter prompt key (e.g., 'greeting', 'introduction')"})]},`prompt-key-field-${t}`),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:`prompt-value-${t}`,children:"Prompt Content (Markdown)"}),a.jsx(ek,{value:e.value,onChange:e=>{console.log("Editor content changed:",e?.substring(0,20)),p(t,e||"")},preview:"edit",height:200})]},`prompt-content-${t}`)]},`prompt-${t}`)),a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>{console.log("Adding new prompt"),l(e=>[...e,{key:"",value:""}])},className:"w-full",disabled:i.some(e=>!e.key.trim()||!e.value.trim()),children:"Add Prompt"})]}),a.jsx(eN.nU,{value:"preview",className:"space-y-4",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-md",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-medium",children:e.key||`Prompt ${t+1}`})},`preview-header-${t}`),a.jsx("div",{className:"p-4 border rounded-md bg-background",children:a.jsx(eP,{source:e.value})},`preview-content-${t}`)]},`preview-prompt-${t}`))})]}),!s&&(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[r&&a.jsx(n.z,{variant:"outline",onClick:r,children:"Cancel"}),a.jsx(n.z,{onClick:()=>{console.log("Save button clicked, current prompts:",i),f()},children:"Save Prompts"})]},"action-buttons")]})}var e_=r(4474);function eA({categories:e,selectedCategoryId:t,onSubmit:r,onCancel:s}){let[i,l]=(0,o.useState)(""),[c,d]=(0,o.useState)(t||""),[u,g]=(0,o.useState)({}),[p,y]=(0,o.useState)(!1),{toast:v}=(0,f.p)(),[x,b]=(0,o.useState)({}),w=async e=>{if(e.preventDefault(),console.log("Submitting subcategory with name:",i),console.log("Using category ID:",c),console.log("Final prompts to submit:",x),!i.trim()){v({title:"Error",description:"Subcategory name cannot be empty",variant:"destructive"});return}if(!c){v({title:"Error",description:"Please select a category",variant:"destructive"});return}let t=Object.entries(x).filter(([e])=>e.trim());if(0===t.length){v({title:"Error",description:"Please add at least one prompt with a key",variant:"destructive"});return}y(!0);try{let e=Object.fromEntries(t.map(([e,t])=>[e.trim(),t.trim()]));console.log("Submitting with formatted prompts:",e),await r(i,c,e),l(""),b({}),g({})}catch(e){console.error("Error submitting subcategory:",e),v({title:"Error",description:e instanceof Error?e.message:"Failed to create subcategory",variant:"destructive"})}finally{y(!1)}};return(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:"name",children:"Subcategory Name"}),a.jsx(h.I,{id:"name",value:i,onChange:e=>l(e.target.value),placeholder:"Enter subcategory name",required:!0})]},"subcategory-name"),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:"category",children:"Category"}),(0,a.jsxs)(e_.Ph,{value:c,onValueChange:d,disabled:!!t,required:!0,children:[a.jsx(e_.i4,{children:a.jsx(e_.ki,{placeholder:"Select a category"})}),a.jsx(e_.Bw,{children:e.map(e=>a.jsx(e_.Ql,{value:e.category_id||e.id||"",children:e.name},e.category_id||e.id||""))})]})]},"category-select"),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{children:"Prompts"}),a.jsx(eT,{initialPrompts:u,onSave:e=>{console.log("Received prompts update:",e),b(e),g(e)},hideActionButtons:!0})]},"prompts-editor"),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(n.z,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),a.jsx(n.z,{type:"submit",disabled:p||0===Object.keys(x).length,children:p?"Creating...":"Create Subcategory"})]},"action-buttons")]})}let eD=eS()(async()=>{},{loadableGenerated:{modules:["components\\prompt-management\\content.tsx -> @uiw/react-markdown-preview"]},ssr:!1});function eI(){let{categories:e,subcategories:t,selectedCategory:r,selectedSubcategory:s,loading:i,error:l,setSelectedCategory:c,setSelectedSubcategory:d,addSubcategory:u,editCategory:y,editSubcategory:x,removeCategory:b,removeSubcategory:w,refreshData:j}=g(),[C,N]=(0,o.useState)([]),[E,S]=(0,o.useState)(!1),[k,P]=(0,o.useState)(!1),[T,_]=(0,o.useState)(!1),[A,D]=(0,o.useState)(""),[I,z]=(0,o.useState)(""),[R,$]=(0,o.useState)({}),{toast:O}=(0,f.p)(),[M,L]=(0,o.useState)(!1),[W,U]=(0,o.useState)(!1),[H,V]=(0,o.useState)(null),[F,Z]=(0,o.useState)(null),q=e=>{console.log("Toggling category with ID:",e),N(t=>t.includes(e)?(console.log("Removing category from expanded list"),t.filter(t=>t!==e)):(console.log("Adding category to expanded list"),[...t,e]))},B=e=>{c(e),d(null);let t=e.category_id||e.id||"";C.includes(t)||q(t)},G=e=>{d(e)},Y=async(e,t,r)=>{if(console.log("Adding subcategory with name:",e),console.log("Category ID for new subcategory:",t),console.log("Prompts:",r),!t){console.error("Category ID is undefined"),O({title:"Error",description:"Cannot add subcategory: missing category ID",variant:"destructive"});return}try{await u(e,t,r),await j(),O({title:"Success",description:"Subcategory added successfully"}),S(!1)}catch(e){console.error("Error adding subcategory:",e),O({title:"Error",description:e instanceof Error?e.message:"Failed to create subcategory",variant:"destructive"})}},X=async()=>{if(console.log("handleEditCategory called, isEditCategoryOpen:",k),console.log("Current selectedCategory:",r),console.log("Current editCategoryName:",A),!r){console.error("No category selected for editing"),O({title:"Error",description:"No category selected for editing",variant:"destructive"});return}try{let e=r.category_id||r.id;if(console.log("Editing category with ID:",e),console.log("New name:",A),!e)throw Error("Category ID is undefined");console.log("About to call editCategory with:",{categoryId:e,name:A}),await y(e,A),console.log("Category updated successfully"),c({...r,name:A}),O({title:"Success",description:"Category updated successfully"}),P(!1),console.log("Edit dialog closed after successful update")}catch(e){console.error("Edit category error:",e),O({title:"Error",description:e instanceof Error?e.message:"Failed to update category",variant:"destructive"})}},K=async()=>{if(!s){console.error("No subcategory selected for editing"),O({title:"Error",description:"No subcategory selected for editing",variant:"destructive"});return}try{let e=s.id;if(!e)throw Error("Invalid subcategory ID");console.log("Updating subcategory:",{id:e,name:I,prompts:R}),await x(e,I,R),await j(),O({title:"Success",description:"Subcategory updated successfully"}),_(!1)}catch(e){console.error("Error updating subcategory:",e),O({title:"Error",description:e instanceof Error?e.message:"Failed to update subcategory",variant:"destructive"})}},J=async()=>{if(H)try{let e=H.category_id||H.id||"";await b(e),O({title:"Success",description:"Category deleted successfully"}),L(!1),V(null)}catch(e){O({title:"Error",description:e instanceof Error?e.message:"Failed to delete category",variant:"destructive"})}},Q=async()=>{if(!F||!F.id){console.error("Invalid subcategory or missing subcategory ID:",F),O({title:"Error",description:"Cannot delete subcategory: Invalid subcategory data",variant:"destructive"});return}try{console.log("Attempting to delete subcategory:",F),await w(F.id),await j(),s?.id===F.id&&d(null),O({title:"Success",description:"Subcategory deleted successfully"}),U(!1),Z(null)}catch(t){let e=t instanceof Error?t.message:"Failed to delete subcategory";console.error("Error deleting subcategory:",t),e.includes("404")?(O({title:"Error",description:"Subcategory not found. It may have been already deleted.",variant:"destructive"}),U(!1),Z(null),s?.id===F.id&&d(null)):e.includes("401")?O({title:"Authentication Error",description:"Your session has expired. Please log in again.",variant:"destructive"}):O({title:"Error",description:e,variant:"destructive"})}},ee=e=>{console.log("openEditCategory called with:",e);let t=e?.category_id||e?.id;if(!e||!t){console.error("Invalid category data:",e),O({title:"Error",description:"Could not edit category: missing or invalid data",variant:"destructive"});return}try{let r={...e,category_id:t};c(r),D(e.name),console.log("Category ID before opening dialog:",t),console.log("Category name before opening dialog:",e.name),setTimeout(()=>{console.log("Opening edit dialog now"),P(!0)},10)}catch(e){console.error("Error in openEditCategory:",e),O({title:"Error",description:"Something went wrong while trying to edit the category",variant:"destructive"})}},et=e=>{if(console.log("Opening edit dialog for subcategory:",e),!e||!e.id){console.error("Invalid subcategory data:",e),O({title:"Error",description:"Cannot edit subcategory: Invalid data",variant:"destructive"});return}d(e),z(e.name),$(e.prompts),_(!0)};return(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx(v.Zb,{className:"col-span-3",children:(0,a.jsxs)(v.aY,{className:"p-4",children:[i&&a.jsx("div",{className:"flex justify-center items-center py-4",children:a.jsx(eu.Z,{className:"h-6 w-6 animate-spin"})}),l&&(0,a.jsxs)(ew,{variant:"destructive",className:"mb-4",children:[a.jsx(ej,{children:"Error"}),a.jsx(eC,{children:l})]}),a.jsx(el,{className:"h-[calc(100vh-200px)]",children:e.map(e=>(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.z,{variant:"ghost",className:"w-full justify-start p-2",onClick:()=>B(e),children:[C.includes(e.category_id||e.id||"")?a.jsx(eg.Z,{className:"mr-2 h-4 w-4"}):a.jsx(ep.Z,{className:"mr-2 h-4 w-4"}),a.jsx(eh,{className:"mr-2 h-4 w-4"}),e.name]}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(n.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),ee(e)},children:a.jsx(em,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),V(e),L(!0)},children:a.jsx(ef,{className:"h-4 w-4"})})]})]}),C.includes(e.category_id||e.id||"")&&(0,a.jsxs)("div",{className:"ml-6 mt-2",children:[t.filter(t=>t.category_id===(e.category_id||e.id||"")).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.z,{variant:s?.id===e.id?"secondary":"ghost",className:"w-full justify-start p-2",onClick:()=>G(e),children:[a.jsx(ey,{className:"mr-2 h-4 w-4"}),e.name]}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>et(e),children:a.jsx(em,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),Z(e),U(!0)},children:a.jsx(ef,{className:"h-4 w-4"})})]})]},e.id)),(0,a.jsxs)(n.z,{variant:"ghost",className:"w-full justify-start p-2",onClick:()=>{c({...e,category_id:e.category_id||e.id||""}),S(!0)},children:[a.jsx(ev,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})]})]},e.category_id||e.id||""))})]})}),a.jsx(v.Zb,{className:"col-span-9",children:a.jsx(v.aY,{className:"p-6",children:s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:s.name}),a.jsx("div",{className:"flex space-x-2",children:(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>et(s),children:[a.jsx(em,{className:"mr-2 h-4 w-4"}),"Edit Subcategory"]})})]},"subcategory-header"),a.jsx(ed.Z,{},"subcategory-separator"),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Prompts"}),Object.entries(s.prompts).map(([e,t])=>a.jsx(v.Zb,{className:"overflow-hidden",children:(0,a.jsxs)(v.aY,{className:"p-0",children:[a.jsx("div",{className:"bg-muted p-3 font-medium border-b",children:e}),a.jsx("div",{className:"p-4",children:a.jsx(eD,{source:t})})]})},e))]},"prompts-section")]}):r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:r.name}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(n.z,{variant:"outline",onClick:e=>{e.stopPropagation(),console.log("Edit button clicked",r),r?ee(r):console.error("No category selected for editing")},children:[a.jsx(em,{className:"mr-2 h-4 w-4"}),"Edit Category"]}),(0,a.jsxs)(n.z,{onClick:()=>{r&&c({...r,category_id:r.category_id||r.id||""}),S(!0)},children:[a.jsx(ev,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})]})]},"category-header"),a.jsx(ed.Z,{},"category-separator"),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Subcategories"}),t.filter(e=>e.category_id===(r.category_id||r.id||"")).map(e=>a.jsx(n.z,{variant:"outline",className:"w-full justify-start text-left h-auto py-3",onClick:()=>G(e),children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Object.keys(e.prompts).length," prompts"]})]})},e.id)),0===t.filter(e=>e.category_id===(r.category_id||r.id||"")).length&&(0,a.jsxs)(ew,{children:[a.jsx(ej,{children:"No subcategories"}),a.jsx(eC,{children:'This category doesn\'t have any subcategories yet. Click the "Add Subcategory" button to create one.'})]},"no-subcategories-alert")]},"subcategories-section")]}):(0,a.jsxs)(ew,{children:[a.jsx(ej,{children:"No Selection"}),a.jsx(eC,{children:"Please select a category or subcategory from the sidebar to view details."})]})})}),a.jsx(p.Vq,{open:E,onOpenChange:e=>{console.log("Add subcategory dialog change:",e),e||S(!1)},children:(0,a.jsxs)(p.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(p.fK,{children:a.jsx(p.$N,{children:"Add New Subcategory"})}),E&&a.jsx(eA,{categories:e,selectedCategoryId:r?.category_id||r?.id||"",onSubmit:Y,onCancel:()=>S(!1)},`subcategory-form-${r?.category_id||r?.id||""}`)]})}),a.jsx(p.Vq,{open:k,onOpenChange:e=>{if(console.log("Edit category dialog state changing to:",e,"current state:",k),console.log("Selected category at dialog state change:",r),e){if(!r||!r.category_id&&!r.id)return console.error("Trying to open category dialog but no valid category is selected:",r),!1;P(!0),console.log("Dialog opened by onOpenChange with category ID:",r.category_id||r.id)}else P(!1),console.log("Dialog closed by onOpenChange")},children:(0,a.jsxs)(p.cZ,{children:[a.jsx(p.fK,{children:a.jsx(p.$N,{children:"Edit Category"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:"edit-category-name",children:"Category Name"}),a.jsx(h.I,{id:"edit-category-name",value:A,onChange:e=>D(e.target.value)})]},"category-name-field"),r&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Category ID: ",r.category_id||r.id]},"category-id-display"),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(n.z,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),a.jsx(n.z,{onClick:X,disabled:i,children:i?"Saving...":"Save Changes"})]},"action-buttons")]})]})}),a.jsx(p.Vq,{open:T,onOpenChange:_,children:(0,a.jsxs)(p.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(p.fK,{children:a.jsx(p.$N,{children:"Edit Subcategory"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{htmlFor:"edit-subcategory-name",children:"Subcategory Name"}),a.jsx(h.I,{id:"edit-subcategory-name",value:I,onChange:e=>z(e.target.value)})]},"subcategory-name-field"),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(m._,{children:"Prompts"}),a.jsx(eT,{initialPrompts:R,onSave:$,onCancel:()=>_(!1),hideActionButtons:!0})]},"prompts-editor"),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(n.z,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),a.jsx(n.z,{onClick:e=>{e.preventDefault(),K()},disabled:i,children:i?"Saving...":"Save Changes"})]},"action-buttons")]})]})}),a.jsx(p.Vq,{open:M,onOpenChange:L,children:(0,a.jsxs)(p.cZ,{children:[(0,a.jsxs)(p.fK,{children:[(0,a.jsxs)(p.$N,{className:"flex items-center gap-2",children:[a.jsx(ex,{className:"h-5 w-5 text-destructive"}),"Delete Category"]}),(0,a.jsxs)(p.Be,{children:['Are you sure you want to delete the category "',H?.name,'"? This will also delete all subcategories and their prompts. This action cannot be undone.']})]}),(0,a.jsxs)(p.cN,{className:"gap-2 sm:gap-0",children:[a.jsx(n.z,{variant:"outline",onClick:()=>{L(!1),V(null)},children:"Cancel"}),a.jsx(n.z,{variant:"destructive",onClick:J,disabled:i,children:i?"Deleting...":"Delete Category"})]})]})}),a.jsx(p.Vq,{open:W,onOpenChange:U,children:(0,a.jsxs)(p.cZ,{children:[(0,a.jsxs)(p.fK,{children:[(0,a.jsxs)(p.$N,{className:"flex items-center gap-2",children:[a.jsx(ex,{className:"h-5 w-5 text-destructive"}),"Delete Subcategory"]}),(0,a.jsxs)(p.Be,{children:['Are you sure you want to delete the subcategory "',F?.name,'"? This will also delete all prompts associated with this subcategory. This action cannot be undone.']})]}),(0,a.jsxs)(p.cN,{className:"gap-2 sm:gap-0",children:[a.jsx(n.z,{variant:"outline",onClick:()=>{U(!1),Z(null)},children:"Cancel"}),a.jsx(n.z,{variant:"destructive",onClick:Q,disabled:i,children:i?"Deleting...":"Delete Subcategory"})]})]})})]})}function ez(){return a.jsx(u,{children:(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[a.jsx(y,{}),a.jsx(eI,{})]})})}},3427:(e,t,r)=>{"use strict";r.d(t,{mQ:()=>T,nU:()=>D,dr:()=>_,SP:()=>A});var a=r(326),o=r(7577),n=r(2561),s=r(3095),i=r(5594),l=r(9815),c=r(5226),d=r(7124),u=r(2067),g=r(8957),p="Tabs",[h,m]=(0,s.b)(p,[i.Pc]),f=(0,i.Pc)(),[y,v]=h(p),x=o.forwardRef((e,t)=>{let{__scopeTabs:r,value:o,onValueChange:n,defaultValue:s,orientation:i="horizontal",dir:l,activationMode:p="automatic",...h}=e,m=(0,d.gm)(l),[f,v]=(0,u.T)({prop:o,onChange:n,defaultProp:s});return(0,a.jsx)(y,{scope:r,baseId:(0,g.M)(),value:f,onValueChange:v,orientation:i,dir:m,activationMode:p,children:(0,a.jsx)(c.WV.div,{dir:m,"data-orientation":i,...h,ref:t})})});x.displayName=p;var b="TabsList",w=o.forwardRef((e,t)=>{let{__scopeTabs:r,loop:o=!0,...n}=e,s=v(b,r),l=f(r);return(0,a.jsx)(i.fC,{asChild:!0,...l,orientation:s.orientation,dir:s.dir,loop:o,children:(0,a.jsx)(c.WV.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:t})})});w.displayName=b;var j="TabsTrigger",C=o.forwardRef((e,t)=>{let{__scopeTabs:r,value:o,disabled:s=!1,...l}=e,d=v(j,r),u=f(r),g=S(d.baseId,o),p=k(d.baseId,o),h=o===d.value;return(0,a.jsx)(i.ck,{asChild:!0,...u,focusable:!s,active:h,children:(0,a.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:g,...l,ref:t,onMouseDown:(0,n.M)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(o)}),onKeyDown:(0,n.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(o)}),onFocus:(0,n.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||s||!e||d.onValueChange(o)})})})});C.displayName=j;var N="TabsContent",E=o.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:s,children:i,...d}=e,u=v(N,r),g=S(u.baseId,n),p=k(u.baseId,n),h=n===u.value,m=o.useRef(h);return o.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(l.z,{present:s||h,children:({present:r})=>(0,a.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":g,hidden:!r,id:p,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&i})})});function S(e,t){return`${e}-trigger-${t}`}function k(e,t){return`${e}-content-${t}`}E.displayName=N;var P=r(7863);let T=x,_=o.forwardRef(({className:e,...t},r)=>a.jsx(w,{ref:r,className:(0,P.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));_.displayName=w.displayName;let A=o.forwardRef(({className:e,...t},r)=>a.jsx(C,{ref:r,className:(0,P.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));A.displayName=C.displayName;let D=o.forwardRef(({className:e,...t},r)=>a.jsx(E,{ref:r,className:(0,P.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));D.displayName=E.displayName},6824:(e,t,r)=>{"use strict";r.d(t,{A4:()=>h,Ox:()=>i,Wc:()=>g,a$:()=>o,cT:()=>s,hv:()=>p,k4:()=>l,nv:()=>m,pE:()=>c,pH:()=>n,uu:()=>u,yr:()=>d});var a=r(7975);async function o(e,t){let r=await fetch(a.Ui,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}async function n(e,t){let r=await fetch(a.C2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await r.json();return r.ok?o:{status:r.status,message:o.message||"An error occurred during login",access_token:"",token_type:""}}async function s(e,t,r,o){let n=new FormData;n.append("file",e),n.append("prompt_category_id",t),n.append("prompt_subcategory_id",r);let s=await fetch(a.C8,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:n}),i=await s.json();if(!s.ok)throw Error(i.message||`HTTP error! status: ${s.status}`);return i}async function i(){let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found. Please log in again.");let t=await fetch(a.cn,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}async function l(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=await fetch(a.rp,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}async function c(){let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found. Please log in again.");let t=await fetch(a.rp,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}async function d(e,t){if(!e)throw console.error("Category ID is undefined or empty"),Error("Invalid category ID. Cannot update category.");let r=localStorage.getItem("token");if(!r)throw Error("No authentication token found. Please log in again.");console.log("Updating category with ID:",e),console.log("New name:",t),console.log("Using token:",r.substring(0,15)+"...");try{let o=await fetch(`${a.rp}/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(console.log("Update category response status:",o.status),!o.ok){if(401===o.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");let e=await o.text();throw console.error("Error response body:",e),Error(`HTTP error! status: ${o.status}, message: ${e}`)}return await o.json()}catch(e){throw console.error("Error updating category:",e),e}}async function u(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=await fetch(`${a.rp}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`)}async function g(e,t,r){let o=localStorage.getItem("token");if(!o)throw Error("No authentication token found. Please log in again.");let n=await fetch(a.Gg,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({name:e,category_id:t,prompts:r})});if(!n.ok)throw Error(`HTTP error! status: ${n.status}`);return await n.json()}async function p(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=e?`${a.Gg}?category_id=${e}`:a.Gg,o=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);return await o.json()}async function h(e,t,r){let o=localStorage.getItem("token");if(!o)throw Error("No authentication token found. Please log in again.");if(!e)throw console.error("Subcategory ID is undefined or empty"),Error("Invalid subcategory ID. Cannot update subcategory.");console.log("Updating subcategory with ID:",e),console.log("New name:",t),console.log("New prompts:",r),console.log("Using token:",o.substring(0,15)+"...");try{let n=await fetch(`${a.Gg}/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({name:t,prompts:r})});if(console.log("Update subcategory response status:",n.status),!n.ok){if(401===n.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");if(404===n.status)throw console.error("Subcategory not found (404)."),Error("Subcategory not found. It may have been already deleted.");let e=await n.text();throw console.error("Error response body:",e),Error(`HTTP error! status: ${n.status}, message: ${e}`)}let s=await n.json();return console.log("Update subcategory response:",s),s}catch(e){throw console.error("Error updating subcategory:",e),e}}async function m(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");if(!e||"string"!=typeof e)throw console.error("Invalid subcategory ID:",e),Error("Invalid subcategory ID. Cannot delete subcategory.");console.log("Deleting subcategory with ID:",e),console.log("Using token:",t.substring(0,15)+"...");try{let r=await fetch(`${a.Gg}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("Delete subcategory response status:",r.status),!r.ok){if(401===r.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");if(404===r.status)throw console.error("Subcategory not found (404)."),Error("Subcategory not found. It may have been already deleted.");let e=await r.text();throw console.error("Error response body:",e),Error(`HTTP error! status: ${r.status}, message: ${e}`)}}catch(e){throw console.error("Error deleting subcategory:",e),e}}},7506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(2881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(8052);r(326),r(7577);let o=a._(r(7028));function n(e,t){var r;let a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,o.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let a=r(4129);function o(e){let{reason:t,children:r}=e;throw new a.BailoutToCSRError(t)}},7028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=r(326),o=r(7577),n=r(933),s=r(6618);function i(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,o.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.PreloadCss,{moduleIds:t.modules}),(0,a.jsx)(r,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(o.Suspense,{fallback:i,children:l})}return d.displayName="LoadableComponent",d}},6618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let a=r(326),o=r(4580);function n(e){let{moduleIds:t}=e,r=(0,o.getExpectedRequestStore)("next/dynamic css"),n=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,a.jsx)(a.Fragment,{children:n.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},1507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\thomasdrew\source\repos\echo-brief4\sonic-brief\frontend_app\app\prompt-management\page.tsx#default`)},471:()=>{},2058:()=>{},4478:(e,t,r)=>{"use strict";r.d(t,{f:()=>i});var a=r(7577),o=r(5226),n=r(326),s=a.forwardRef((e,t)=>(0,n.jsx)(o.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=s}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,48,524,591,946],()=>r(7763));module.exports=a})();
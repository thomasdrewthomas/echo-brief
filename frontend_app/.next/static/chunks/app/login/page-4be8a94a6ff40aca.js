(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7270:function(e,t,r){Promise.resolve().then(r.bind(r,6738))},6738:function(e,t,r){"use strict";r.d(t,{AuthForm:function(){return x}});var o=r(7437),n=r(2265),a=r(3590),s=r(9501),i=r(1229),c=r(9376),l=r(9010),u=r(4918);r(111);var d=r(2339),f=r(2869),g=r(5681),m=r(5186),h=r(1817),p=r(9116);let y=i.Ry({email:i.Z_().email({message:"Invalid email address"}),password:i.Z_().min(6,{message:"Password must be at least 6 characters"})}),w=i.Ry({email:i.Z_().email({message:"Invalid email address"}),password:i.Z_().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:i.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function x(){let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!1),[x,b]=(0,n.useState)(null),j=(0,c.useRouter)(),v=(0,s.cI)({resolver:(0,a.F)(y),defaultValues:{email:"",password:""}}),k=(0,s.cI)({resolver:(0,a.F)(w),defaultValues:{email:"",password:"",confirmPassword:""}});async function N(e){t(!0);try{let t=await (0,p.pH)(e.email,e.password);if(401===t.status)throw Error(t.message||"Invalid credentials");if(!t.access_token)throw Error("No access token received");localStorage.setItem("token",t.access_token),i(!0),b({type:"success",message:"Login successful"}),j.push("/audio-upload")}catch(e){b({type:"error",message:e instanceof Error?e.message:"Login failed. Please check your credentials and try again."}),i(!1),localStorage.removeItem("token")}finally{t(!1)}}async function E(e){t(!0);try{let t=await (0,p.a$)(e.email,e.password);if(400===t.status)throw Error(t.message||"Email already registered");b({type:"success",message:t.message});let r=await (0,p.pH)(e.email,e.password);localStorage.setItem("token",r.access_token),i(!0),j.push("/audio-upload")}catch(e){b({type:"error",message:e instanceof Error?e.message:"An error occurred during registration. Please try again."})}finally{t(!1)}}return(0,n.useEffect)(()=>{r&&j.push("/audio-upload")},[r,j]),(0,n.useEffect)(()=>{if(x){let e=setTimeout(()=>{b(null)},5e3);return()=>clearTimeout(e)}},[x]),(0,o.jsxs)("div",{className:"space-y-6",children:[x&&(0,o.jsx)("div",{children:(0,o.jsx)(l.Q2,{children:(0,o.jsx)(u.fC,{color:"success"===x.type?"green":"red",children:(0,o.jsx)(u.xv,{children:x.message})})})}),(0,o.jsxs)(d.mQ,{defaultValue:"login",className:"w-full",children:[(0,o.jsxs)(d.dr,{className:"grid w-full grid-cols-2",children:[(0,o.jsx)(d.SP,{value:"login",children:"Login"}),(0,o.jsx)(d.SP,{value:"register",children:"Register"})]}),(0,o.jsx)(d.nU,{value:"login",children:(0,o.jsx)(g.l0,{...v,children:(0,o.jsxs)("form",{onSubmit:v.handleSubmit(N),className:"space-y-4",children:[(0,o.jsx)(g.Wi,{control:v.control,name:"email",render:e=>{let{field:t}=e;return(0,o.jsxs)(g.xJ,{children:[(0,o.jsx)(g.lX,{children:"Email"}),(0,o.jsx)(g.NI,{children:(0,o.jsx)(m.I,{placeholder:"Enter your email",...t})}),(0,o.jsx)(g.zG,{})]})}}),(0,o.jsx)(g.Wi,{control:v.control,name:"password",render:e=>{let{field:t}=e;return(0,o.jsxs)(g.xJ,{children:[(0,o.jsx)(g.lX,{children:"Password"}),(0,o.jsx)(g.NI,{children:(0,o.jsx)(m.I,{type:"password",placeholder:"Enter your password",...t})}),(0,o.jsx)(g.zG,{})]})}}),(0,o.jsx)(f.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]})})}),(0,o.jsx)(d.nU,{value:"register",children:(0,o.jsx)(g.l0,{...k,children:(0,o.jsxs)("form",{onSubmit:k.handleSubmit(E),className:"space-y-4",children:[(0,o.jsx)(g.Wi,{control:k.control,name:"email",render:e=>{let{field:t}=e;return(0,o.jsxs)(g.xJ,{children:[(0,o.jsx)(g.lX,{children:"Email"}),(0,o.jsx)(g.NI,{children:(0,o.jsx)(m.I,{placeholder:"Enter your email",...t})}),(0,o.jsx)(g.zG,{})]})}}),(0,o.jsx)(g.Wi,{control:k.control,name:"password",render:e=>{let{field:t}=e;return(0,o.jsxs)(g.xJ,{children:[(0,o.jsx)(g.lX,{children:"Password"}),(0,o.jsx)(g.NI,{children:(0,o.jsx)(m.I,{type:"password",placeholder:"Create a password",...t})}),(0,o.jsx)(g.zG,{})]})}}),(0,o.jsx)(g.Wi,{control:k.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,o.jsxs)(g.xJ,{children:[(0,o.jsx)(g.lX,{children:"Confirm Password"}),(0,o.jsx)(g.NI,{children:(0,o.jsx)(m.I,{type:"password",placeholder:"Confirm your password",...t})}),(0,o.jsx)(g.zG,{})]})}}),(0,o.jsx)(f.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Registering..."]}):"Register"})]})})})]})]})}},2869:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var o=r(7437),n=r(2265),a=r(7053),s=r(535),i=r(4508);let c=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,o.jsx)(d,{className:(0,i.cn)(c({variant:n,size:s,className:r})),ref:t,...u})});l.displayName="Button"},5681:function(e,t,r){"use strict";r.d(t,{NI:function(){return p},Wi:function(){return d},l0:function(){return l},lX:function(){return h},pf:function(){return y},xJ:function(){return m},zG:function(){return w}});var o=r(7437),n=r(2265),a=r(7053),s=r(9501),i=r(4508),c=r(6815);let l=s.RV,u=n.createContext({}),d=e=>{let{...t}=e;return(0,o.jsx)(u.Provider,{value:{name:t.name},children:(0,o.jsx)(s.Qr,{...t})})},f=()=>{let e=n.useContext(u),t=n.useContext(g),{getFieldState:r,formState:o}=(0,s.Gc)(),a=r(e.name,o);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},g=n.createContext({}),m=n.forwardRef((e,t)=>{let{className:r,...a}=e,s=n.useId();return(0,o.jsx)(g.Provider,{value:{id:s},children:(0,o.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...a})})});m.displayName="FormItem";let h=n.forwardRef((e,t)=>{let{className:r,...n}=e,{error:a,formItemId:s}=f();return(0,o.jsx)(c._,{ref:t,className:(0,i.cn)(a&&"text-destructive",r),htmlFor:s,...n})});h.displayName="FormLabel";let p=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:s,formDescriptionId:i,formMessageId:c}=f();return(0,o.jsx)(a.g7,{ref:t,id:s,"aria-describedby":n?"".concat(i," ").concat(c):"".concat(i),"aria-invalid":!!n,...r})});p.displayName="FormControl";let y=n.forwardRef((e,t)=>{let{className:r,...n}=e,{formDescriptionId:a}=f();return(0,o.jsx)("p",{ref:t,id:a,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});y.displayName="FormDescription";let w=n.forwardRef((e,t)=>{let{className:r,children:n,...a}=e,{error:s,formMessageId:c}=f(),l=s?String(null==s?void 0:s.message):n;return l?(0,o.jsx)("p",{ref:t,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",r),...a,children:l}):null});w.displayName="FormMessage"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var o=r(7437),n=r(2265),a=r(4508);let s=n.forwardRef((e,t)=>{let{className:r,type:n,...s}=e;return(0,o.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});s.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var o=r(7437),n=r(2265),a=r(6394),s=r(535),i=r(4508);let c=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.f,{ref:t,className:(0,i.cn)(c(),r),...n})});l.displayName=a.f.displayName},2339:function(e,t,r){"use strict";r.d(t,{SP:function(){return l},dr:function(){return c},mQ:function(){return i},nU:function(){return u}});var o=r(7437),n=r(2265),a=r(271),s=r(4508);let i=a.fC,c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.aV,{ref:t,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...n})});c.displayName=a.aV.displayName;let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...n})});l.displayName=a.xz.displayName;let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});u.displayName=a.VY.displayName},9116:function(e,t,r){"use strict";r.d(t,{A4:function(){return m},Ox:function(){return i},Wc:function(){return f},a$:function(){return n},cT:function(){return s},hv:function(){return g},k4:function(){return c},nv:function(){return h},pE:function(){return l},pH:function(){return a},uu:function(){return d},yr:function(){return u}});var o=r(9053);async function n(e,t){let r=await fetch(o.Ui,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}async function a(e,t){let r=await fetch(o.C2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),n=await r.json();return r.ok?n:{status:r.status,message:n.message||"An error occurred during login",access_token:"",token_type:""}}async function s(e,t,r,n){let a=new FormData;a.append("file",e),a.append("prompt_category_id",t),a.append("prompt_subcategory_id",r);let s=await fetch(o.C8,{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:a}),i=await s.json();if(!s.ok)throw Error(i.message||"HTTP error! status: ".concat(s.status));return i}async function i(){let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found. Please log in again.");let t=await fetch(o.cn,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}async function c(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=await fetch(o.rp,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}async function l(){let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found. Please log in again.");let t=await fetch(o.rp,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}async function u(e,t){if(!e)throw console.error("Category ID is undefined or empty"),Error("Invalid category ID. Cannot update category.");let r=localStorage.getItem("token");if(!r)throw Error("No authentication token found. Please log in again.");console.log("Updating category with ID:",e),console.log("New name:",t),console.log("Using token:",r.substring(0,15)+"...");try{let n=await fetch("".concat(o.rp,"/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(console.log("Update category response status:",n.status),!n.ok){if(401===n.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");let e=await n.text();throw console.error("Error response body:",e),Error("HTTP error! status: ".concat(n.status,", message: ").concat(e))}return await n.json()}catch(e){throw console.error("Error updating category:",e),e}}async function d(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=await fetch("".concat(o.rp,"/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status))}async function f(e,t,r){let n=localStorage.getItem("token");if(!n)throw Error("No authentication token found. Please log in again.");let a=await fetch(o.Gg,{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:e,category_id:t,prompts:r})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}async function g(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");let r=e?"".concat(o.Gg,"?category_id=").concat(e):o.Gg,n=await fetch(r,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return await n.json()}async function m(e,t,r){let n=localStorage.getItem("token");if(!n)throw Error("No authentication token found. Please log in again.");if(!e)throw console.error("Subcategory ID is undefined or empty"),Error("Invalid subcategory ID. Cannot update subcategory.");console.log("Updating subcategory with ID:",e),console.log("New name:",t),console.log("New prompts:",r),console.log("Using token:",n.substring(0,15)+"...");try{let a=await fetch("".concat(o.Gg,"/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:t,prompts:r})});if(console.log("Update subcategory response status:",a.status),!a.ok){if(401===a.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");if(404===a.status)throw console.error("Subcategory not found (404)."),Error("Subcategory not found. It may have been already deleted.");let e=await a.text();throw console.error("Error response body:",e),Error("HTTP error! status: ".concat(a.status,", message: ").concat(e))}let s=await a.json();return console.log("Update subcategory response:",s),s}catch(e){throw console.error("Error updating subcategory:",e),e}}async function h(e){let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found. Please log in again.");if(!e||"string"!=typeof e)throw console.error("Invalid subcategory ID:",e),Error("Invalid subcategory ID. Cannot delete subcategory.");console.log("Deleting subcategory with ID:",e),console.log("Using token:",t.substring(0,15)+"...");try{let r=await fetch("".concat(o.Gg,"/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(console.log("Delete subcategory response status:",r.status),!r.ok){if(401===r.status)throw console.error("Authentication failed (401). Token may be invalid or expired."),localStorage.removeItem("token"),Error("Authentication failed. Please log in again.");if(404===r.status)throw console.error("Subcategory not found (404)."),Error("Subcategory not found. It may have been already deleted.");let e=await r.text();throw console.error("Error response body:",e),Error("HTTP error! status: ".concat(r.status,", message: ").concat(e))}}catch(e){throw console.error("Error deleting subcategory:",e),e}}},9053:function(e,t,r){"use strict";r.d(t,{C2:function(){return i},C8:function(){return a},Gg:function(){return l},Ui:function(){return n},Vf:function(){return s},cn:function(){return u},rp:function(){return c}});let o="https://".concat("happy-mud-0db17ac03.6",".azurestaticapps.net"),n="".concat(o,"/register"),a="".concat(o,"/upload"),s="".concat(o,"/jobs"),i="".concat(o,"/login"),c="".concat(o,"/categories"),l="".concat(o,"/subcategories"),u="".concat(o,"/retrieve_prompts")},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var o=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,o.W)(t))}}},function(e){e.O(0,[913,38,658,542,533,971,117,744],function(){return e(e.s=7270)}),_N_E=e.O()}]);